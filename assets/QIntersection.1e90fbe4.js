import{a1 as m,a2 as y,C as _,r as q,B as f,c as d,h as c,_ as I}from"./index.077cbaab.js";import{e as S,a as D}from"./vm.a84afd58.js";const g={threshold:0,root:null,rootMargin:"0px"};function b(e,n,t){var a;let i,r,s;typeof t=="function"?(i=t,r=g,s=n.cfg===void 0):(i=t.handler,r=Object.assign({},g,t.cfg),s=n.cfg===void 0||y(n.cfg,r)===!1),n.handler!==i&&(n.handler=i),s===!0&&(n.cfg=r,(a=n.observer)==null||a.unobserve(e),n.observer=new IntersectionObserver(([o])=>{if(typeof n.handler=="function"){if(o.rootBounds===null&&document.body.contains(e)===!0){n.observer.unobserve(e),n.observer.observe(e);return}(n.handler(o,n.observer)===!1||n.once===!0&&o.isIntersecting===!0)&&h(e)}},r),n.observer.observe(e))}function h(e){var t;const n=e.__qvisible;n!==void 0&&((t=n.observer)==null||t.unobserve(e),delete e.__qvisible)}var B=m({name:"intersection",mounted(e,{modifiers:n,value:t}){const i={once:n.once===!0};b(e,i,t),e.__qvisible=i},updated(e,n){const t=e.__qvisible;t!==void 0&&b(e,t,n.value)},beforeUnmount:h}),Q=_({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:n,emit:t}){const i=q(f.value===!0?e.ssrPrerender:!1),r=d(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:l,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:l),s=d(()=>e.disable!==!0&&(f.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),a=d(()=>[[B,r.value,void 0,{once:e.once}]]),o=d(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function l(u){i.value!==u.isIntersecting&&(i.value=u.isIntersecting,e.onVisibility!==void 0&&t("visibility",i.value))}function v(){if(i.value===!0)return[c("div",{key:"content",style:o.value},D(n.default))];if(n.hidden!==void 0)return[c("div",{key:"hidden",style:o.value},n.hidden())]}return()=>{const u=e.transition?[c(I,{name:"q-transition--"+e.transition},v)]:v();return S(e.tag,{class:"q-intersection"},u,"main",s.value,()=>a.value)}}});export{Q};
